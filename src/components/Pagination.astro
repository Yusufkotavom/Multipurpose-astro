---
export interface Props {
  currentPage: number;
  totalPages: number;
  currentCategory: string;
}

const { currentPage, totalPages, currentCategory } = Astro.props;

const generatePageNumbers = () => {
  const pages = [];
  const maxVisible = 5;
  
  if (totalPages <= maxVisible) {
    for (let i = 1; i <= totalPages; i++) {
      pages.push(i);
    }
  } else {
    if (currentPage <= 3) {
      for (let i = 1; i <= 4; i++) {
        pages.push(i);
      }
      pages.push('...');
      pages.push(totalPages);
    } else if (currentPage >= totalPages - 2) {
      pages.push(1);
      pages.push('...');
      for (let i = totalPages - 3; i <= totalPages; i++) {
        pages.push(i);
      }
    } else {
      pages.push(1);
      pages.push('...');
      for (let i = currentPage - 1; i <= currentPage + 1; i++) {
        pages.push(i);
      }
      pages.push('...');
      pages.push(totalPages);
    }
  }
  
  return pages;
};

const pages = generatePageNumbers();
---

<nav class="flex items-center justify-center space-x-2">
  <!-- Previous -->
  {currentPage > 1 && (
    <a
      href={`/blog?page=${currentPage - 1}${currentCategory !== 'Semua' ? `&category=${currentCategory}` : ''}`}
      class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"
    >
      Sebelumnya
    </a>
  )}
  
  <!-- Page Numbers -->
  {pages.map((page) => (
    page === '...' ? (
      <span class="px-3 py-2 text-sm text-gray-400">...</span>
    ) : (
      <a
        href={`/blog?page=${page}${currentCategory !== 'Semua' ? `&category=${currentCategory}` : ''}`}
        class={`px-3 py-2 text-sm font-medium rounded-lg ${
          page === currentPage
            ? 'bg-primary-600 text-white'
            : 'text-gray-500 bg-white border border-gray-300 hover:bg-gray-50'
        }`}
      >
        {page}
      </a>
    )
  ))}
  
  <!-- Next -->
  {currentPage < totalPages && (
    <a
      href={`/blog?page=${currentPage + 1}${currentCategory !== 'Semua' ? `&category=${currentCategory}` : ''}`}
      class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"
    >
      Selanjutnya
    </a>
  )}
</nav>